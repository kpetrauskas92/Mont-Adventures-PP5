{% extends 'base.html' %}

{% load static %}
{% load rating_filters %}
{% block content %}
<div class="w-full relative" style="height: 65vh;">

    <!-- Title for Desktop View -->
    <div class="w-full relative gradient-container" style="height: 65vh;">
        {% if trip.main_image %}
            <img class="absolute w-full h-full object-cover"
                 src="{{ trip.main_image.url }}"
                 alt="{{ trip.name }}">
        {% else %}
            <img class="absolute w-full h-full object-cover"
                 src="{{ trip.default_image_url }}"
                 alt="{{ trip.name }}">
        {% endif %}
        <div class=" md:w-[70%] absolute bottom-0 left-0 right-0 hidden sm:block text-container">
            <h1 class="text-white uppercase text-6xl font-bold p-4">{{ trip.name }}</h1>
        </div>
        <div class="absolute bottom-0 left-0 right-0 hidden sm:block gradient-bg"></div> <!-- Gradient div -->
    </div>
</div>

<div  class="bg-gray-900">
    <div class="md:grid md:grid-cols-[2fr,1fr]">
        <!-- Horizontal Line -->
        <hr class="h-px mb-0 bg-gray-200 border-0 dark:bg-gray-700 col-span-3">

        <div class="w-full p-4 md:col-span-1">
            <!-- Breadcrumbs WIP -->
            <div class="text-sm text-white breadcrumbs sm:hidden">
                <ul>
                  <li><a>Home</a></li> 
                  <li><a>Explore</a></li>
                  <li>France</li>
                </ul>
            </div>

            <!-- Trip Name -->
            <h1 class="text-white uppercase text-4xl font-bold mb-5 sm:hidden">{{ trip.name }}</h1>

            <!-- Trip Details Grid -->
            <div class="flex gap-4 md:gap-10 lg:gap-14 justify-center mt-4">
                {% for item in trip_details %}
                <div class="flex flex-col items-center">
                    <img src="{% static item.icon %}" alt="{{ item.alt }}"
                         class="w-8 h-8 sm:w-14 sm:h-14 md:w-18 md:h-18">
                    <div class="mt-2 text-xs md:text-sm text-center">
                        <p class="text-white font-light">{{ item.label }}</p>
                        <p class="text-white font-bold">{{ item.value }}</p>
                    </div>
                </div>
                {% endfor %}
            </div>
        </div>
        
        <!-- Trip Price -->
        <div class="hidden md:grid lg:block bg-white p-4 md:col-span-1">
            <p class="text-xl text-center text-black">Book this trip today</p>
            <p class="text-4xl font-bold text-center text-black my-4">€{{ trip.price }}</p>
            <div class="rating flex justify-center w-full">
                
                <!-- Reviews WIP -->
                    <p class="text-xl text-black mr-4">Reviews</p>
                    <!-- Filled Stars -->
                    {% for i in filled_stars|generate_range %}
                    <svg xmlns="http://www.w3.org/2000/svg" fill="orange" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M11.48 3.499a.562.562 0 011.04 0l2.125 5.111a.563.563 0 00.475.345l5.518.442c.499.04.701.663.321.988l-4.204 3.602a.563.563 0 00-.182.557l1.285 5.385a.562.562 0 01-.84.61l-4.725-2.885a.563.563 0 00-.586 0L6.982 20.54a.562.562 0 01-.84-.61l1.285-5.386a.562.562 0 00-.182-.557l-4.204-3.602a.563.563 0 01.321-.988l5.518-.442a.563.563 0 00.475-.345L11.48 3.5z" />
                    </svg>
                    {% endfor %}
                    <!-- Empty Stars -->
                    {% for i in 5|subtract:filled_stars|generate_range %}
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="orange" class="w-6 h-6">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M11.48 3.499a.562.562 0 011.04 0l2.125 5.111a.563.563 0 00.475.345l5.518.442c.499.04.701.663.321.988l-4.204 3.602a.563.563 0 00-.182.557l1.285 5.385a.562.562 0 01-.84.61l-4.725-2.885a.563.563 0 00-.586 0L6.982 20.54a.562.562 0 01-.84-.61l1.285-5.386a.562.562 0 00-.182-.557l-4.204-3.602a.563.563 0 01.321-.988l5.518-.442a.563.563 0 00.475-.345L11.48 3.5z" />
                    </svg>
                    {% endfor %}
                </div>
              
            <label for="my-drawer-4" class="btn btn-secondary w-full mt-2" hx-get="{% url 'booking_drawer' trip.id %}" hx-trigger="click" hx-target="#booking-drawer-content">Book Now</label>
        </div>

        <!-- Sticky Bottom Button for medium and lower screen sizes -->
        <div class="md:hidden fixed inset-x-0 bottom-0 z-50 bg-white p-2 flex items-center justify-between">
            <label for="my-drawer-4"
                   class="btn btn-secondary "
                   hx-get="{% url 'booking_drawer' trip.id %}"
                   hx-trigger="click"
                   hx-target="#booking-drawer-content">Book Now</label>
            <p class="text-2xl text-center font-bold text-black ml-auto">€{{ trip.price }}</p>
        </div>
        
        
    </div>
    <!-- Trip Sub Details WIP -->
    <div class="bg-white md:grid md:grid-cols-[2fr,1fr]">
        <div class="tabs pt-4 flex justify-center">
            <a class="tab tab-bordered tab-active">Trip Details</a> 
            <a class="tab tab-bordered">What's Included</a>
            <a class="tab tab-bordered" hx-get="{% url 'trip_reviews' trip.id %}" hx-trigger="click" hx-target="#trip-sub-section">Reviews</a> 
            <a class="tab tab-bordered">FAQ's</a>
            <div id="trip-sub-section" class="p-6 w-full">

            </div>
        </div>    
    </div>
</div>

{% include 'includes/booking/booking-drawer.html' %}
<script>
    document.addEventListener("DOMContentLoaded", function() {
        const tabs = document.querySelectorAll(".tab");
        tabs.forEach(tab => {
            tab.addEventListener("click", function() {
                tabs.forEach(t => t.classList.remove("tab-active"));
                this.classList.add("tab-active");
            });
        });
    });
</script>
{% endblock %}