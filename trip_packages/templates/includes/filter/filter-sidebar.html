{% load static %}
<form hx-get="{% url 'trip_packages' %}" hx-target="#trip-package-list">
    <div class="join join-vertical w-full">
        {% for filter_name, filter_items in filters.items %}
        <div class="collapse collapse-arrow join-item border border-base-300">
            <input type="radio" name="filter" /> 
            <div class="collapse-title text-xl font-medium flex items-center">
                <img src="{% static 'web_elements/svg_icons/trip_icons/'|add:filter_name|add:'_icon.svg' %}" 
                     alt="{{ filter_name|capfirst }} Icon"
                     class="w-6 h-6 mr-2 filter-icon">
                {{ filter_name|capfirst }}
            </div>
            <div class="collapse-content">
                <ul class="flex-col">
                    {% for item in filter_items %}
                        <li class="flex mt-2">
                            <input type="checkbox" 
                                   class="checkbox mr-2" 
                                   name="{{ filter_name }}" 
                                   value="{{ item.value }}">
                                   {{ item.display }}
                        </li>
                    {% endfor %}
                </ul>
            </div>
        </div>
        {% endfor %}
    </div>
    <button class="btn w-full mt-2" type="submit">Apply Filters</button>
</form>
<script>
    document.body.addEventListener('htmx:afterOnLoad', function(event) {
        var tripCountElement = document.getElementById('trip-count');
        var tripItems = document.querySelectorAll('#trip-package-list .trip-item').length;
        var expeditionText = tripItems === 1 ? ' Expedition' : ' Expeditions';
        tripCountElement.innerHTML = '<strong>' + tripItems + '</strong>' + expeditionText;
    });  
</script>